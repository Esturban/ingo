{
  "plan_file": "/Users/EVA/Desktop/eva/03_development/_dev/repos/3_utilities/sh/ingo/.self-improve/runs/20260222-214709-issue-15/plan.md",
  "valid": true,
  "sections": {
    "objective": {
      "present": true,
      "text": "- Plan a minimal fix for issue #15 so `bin/ingo query` validates `--top-k` early, fails clearly with exit code `2` on invalid input, and only sends a numeric `topK` to `/query-data`."
    },
    "scope_in": {
      "present": true,
      "text": "- Add `--top-k` validation logic in `cmd_query` in `bin/ingo`.\n- Enforce positive integer format (no floats, signs, text, empty).\n- Clamp accepted value to a documented upper bound (proposed: `1..50`).\n- Ensure invalid `--top-k` errors are explicit and return exit code `2`.\n- Update CLI usage/help text to document valid `--top-k` range.\n- Update README usage note for `query --top-k`."
    },
    "scope_out": {
      "present": true,
      "text": "- No changes to ingestion pipeline (`fetch/ocr/chunk/embed/cleanup`).\n- No API contract changes in `lib/query.sh` beyond relying on validated numeric input from CLI.\n- No refactor of global argument parsing or command dispatch.\n- No network/service reliability changes outside input validation."
    },
    "step_checklist": {
      "present": true,
      "count": 12
    },
    "expected_file_touches": {
      "present": true,
      "count": 2
    },
    "validation_commands": {
      "present": true,
      "count": 7
    },
    "acceptance_criteria": {
      "present": true,
      "count": 5
    }
  },
  "lint_errors": []
}
