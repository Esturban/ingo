{
  "generated_at": "2026-02-22T21:39:31Z",
  "expected_files": [
    "`bin/ingo`",
    "`lib/embed.sh`"
  ],
  "expected_checks": [
    "`bin/ingo --help > /tmp/ingo-help.before`",
    "`shellcheck -x bin/ingo lib/*.sh`",
    "`bin/ingo doctor`",
    "`bin/ingo --help > /tmp/ingo-help.after`",
    "`diff -u /tmp/ingo-help.before /tmp/ingo-help.after`"
  ],
  "steps": [
    {
      "id": "S01",
      "text": "Capture a baseline of help output to prove contract stability: run and save `bin/ingo --help`.",
      "expected_files": [
        "`bin/ingo`",
        "`lib/embed.sh`"
      ],
      "expected_checks": [
        "`bin/ingo --help > /tmp/ingo-help.before`",
        "`shellcheck -x bin/ingo lib/*.sh`",
        "`bin/ingo doctor`",
        "`bin/ingo --help > /tmp/ingo-help.after`",
        "`diff -u /tmp/ingo-help.before /tmp/ingo-help.after`"
      ]
    },
    {
      "id": "S02",
      "text": "Fix `bin/ingo` source directives so ShellCheck can statically follow local libs with `-x` (without changing runtime source targets).",
      "expected_files": [
        "`bin/ingo`",
        "`lib/embed.sh`"
      ],
      "expected_checks": [
        "`bin/ingo --help > /tmp/ingo-help.before`",
        "`shellcheck -x bin/ingo lib/*.sh`",
        "`bin/ingo doctor`",
        "`bin/ingo --help > /tmp/ingo-help.after`",
        "`diff -u /tmp/ingo-help.before /tmp/ingo-help.after`"
      ]
    },
    {
      "id": "S03",
      "text": "Refactor the `lib/embed.sh` JSONL ingestion loop to remove `SC2094` ambiguity while keeping line-by-line embed behavior intact.",
      "expected_files": [
        "`bin/ingo`",
        "`lib/embed.sh`"
      ],
      "expected_checks": [
        "`bin/ingo --help > /tmp/ingo-help.before`",
        "`shellcheck -x bin/ingo lib/*.sh`",
        "`bin/ingo doctor`",
        "`bin/ingo --help > /tmp/ingo-help.after`",
        "`diff -u /tmp/ingo-help.before /tmp/ingo-help.after`"
      ]
    },
    {
      "id": "S04",
      "text": "Run `shellcheck -x bin/ingo lib/*.sh` and iterate until clean.",
      "expected_files": [
        "`bin/ingo`",
        "`lib/embed.sh`"
      ],
      "expected_checks": [
        "`bin/ingo --help > /tmp/ingo-help.before`",
        "`shellcheck -x bin/ingo lib/*.sh`",
        "`bin/ingo doctor`",
        "`bin/ingo --help > /tmp/ingo-help.after`",
        "`diff -u /tmp/ingo-help.before /tmp/ingo-help.after`"
      ]
    },
    {
      "id": "S05",
      "text": "Run `bin/ingo doctor` and confirm success.",
      "expected_files": [
        "`bin/ingo`",
        "`lib/embed.sh`"
      ],
      "expected_checks": [
        "`bin/ingo --help > /tmp/ingo-help.before`",
        "`shellcheck -x bin/ingo lib/*.sh`",
        "`bin/ingo doctor`",
        "`bin/ingo --help > /tmp/ingo-help.after`",
        "`diff -u /tmp/ingo-help.before /tmp/ingo-help.after`"
      ]
    },
    {
      "id": "S06",
      "text": "Re-run `bin/ingo --help` and compare against baseline for exact match.",
      "expected_files": [
        "`bin/ingo`",
        "`lib/embed.sh`"
      ],
      "expected_checks": [
        "`bin/ingo --help > /tmp/ingo-help.before`",
        "`shellcheck -x bin/ingo lib/*.sh`",
        "`bin/ingo doctor`",
        "`bin/ingo --help > /tmp/ingo-help.after`",
        "`diff -u /tmp/ingo-help.before /tmp/ingo-help.after`"
      ]
    },
    {
      "id": "S07",
      "text": "Summarize changed lines and why each change is behavior-preserving.",
      "expected_files": [
        "`bin/ingo`",
        "`lib/embed.sh`"
      ],
      "expected_checks": [
        "`bin/ingo --help > /tmp/ingo-help.before`",
        "`shellcheck -x bin/ingo lib/*.sh`",
        "`bin/ingo doctor`",
        "`bin/ingo --help > /tmp/ingo-help.after`",
        "`diff -u /tmp/ingo-help.before /tmp/ingo-help.after`"
      ]
    }
  ]
}
