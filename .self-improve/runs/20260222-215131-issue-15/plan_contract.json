{
  "plan_file": "/Users/EVA/Desktop/eva/03_development/_dev/repos/3_utilities/sh/ingo/.self-improve/runs/20260222-215131-issue-15/plan.md",
  "valid": true,
  "sections": {
    "objective": {
      "present": true,
      "text": "Propose a minimal, testable change for issue #15 so `bin/ingo query` validates `--top-k` early, accepts only positive integers, optionally clamps to a safe max, and returns clear exit-code-`2` errors instead of `jq`/API failures."
    },
    "scope_in": {
      "present": true,
      "text": "- Add strict `--top-k` parsing/validation in `bin/ingo` (`cmd_query` path).\n- Enforce integer-only input and reject `<= 0`.\n- Clamp valid integers above an upper bound to that bound (proposed: `50`).\n- Update query help/usage text to document allowed format/range.\n- Verify failure modes and JSON payload behavior with repository-local commands."
    },
    "scope_out": {
      "present": true,
      "text": "- No changes to Upstash API contract or endpoint logic in `lib/query.sh`.\n- No ingestion/OCR/chunk/embed behavior changes.\n- No broad refactors of CLI argument parsing across unrelated commands.\n- No external CI/workflow changes."
    },
    "step_checklist": {
      "present": true,
      "count": 7
    },
    "expected_file_touches": {
      "present": true,
      "count": 2
    },
    "validation_commands": {
      "present": true,
      "count": 4
    },
    "acceptance_criteria": {
      "present": true,
      "count": 5
    }
  },
  "lint_errors": []
}
