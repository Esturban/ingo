{"assignees":[],"author":{"id":"MDQ6VXNlcjE5Njc1NDIz","is_bot":false,"login":"Esturban","name":"Esteban V"},"body":"Problem\n`cmd_query` passes `--top-k` directly to `ingo_query_text`, which uses `jq --argjson top_k \"$top_k\"`. Non-numeric values (or negative/zero values) can break query execution or produce invalid requests.\n\nWhy this matters now\n`ingo` is intended as a lightweight runtime for fast agent querying. Query reliability is critical on query-only devices (`INGO_ROLE=query`), and malformed CLI input should fail fast with a clear error instead of producing opaque jq/API failures.\n\nScope\n- Add strict validation in `bin/ingo` for `--top-k`.\n- Accept only positive integers.\n- Optionally clamp to a sane upper bound (for example 1-50) to avoid accidental oversized queries.\n- Return exit code 2 with a clear message when invalid.\n\nAcceptance Criteria\n- `bin/ingo query \"x\" --top-k foo` fails with a clear validation message and exit code 2.\n- `bin/ingo query \"x\" --top-k 0` fails similarly.\n- `bin/ingo query \"x\" --top-k 8` succeeds and sends numeric `topK` in JSON payload.\n- Help/usage text documents valid `--top-k` range/format.","createdAt":"2026-02-22T21:44:07Z","labels":[{"id":"LA_kwDORTY88c8AAAACYkV5Pw","name":"bug","description":"Something isn't working","color":"d73a4a"},{"id":"LA_kwDORTY88c8AAAACY_KjQg","name":"query","description":"Repo-specific issue label","color":"1D76DB"}],"number":15,"state":"OPEN","title":"Validate and clamp `--top-k` input before calling `/query-data`","updatedAt":"2026-02-22T21:50:22Z","url":"https://github.com/Esturban/ingo/issues/15"}
